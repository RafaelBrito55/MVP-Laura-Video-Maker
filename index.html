<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Laura — Gestão (MVP)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />

  <!-- Firebase SDKs (Compat via CDN) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>

<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">LM</div>
      <div>
        <div class="brand-title">Laura — Gestão</div>
        <div class="brand-subtitle" id="empresa-nome">—</div>
      </div>
    </div>

    <div class="topbar-actions">
      <button class="btn ghost" id="btn-logout" title="Sair">Sair</button>
    </div>
  </header>

  <!-- LOGIN -->
  <main class="center" id="view-auth">
    <div class="card auth-card">
      <h1>Entrar</h1>
      <p class="muted">Acesse sua conta para gerenciar clientes, projetos e financeiro.</p>

      <div class="form-grid">
        <label>
          <span>E-mail</span>
          <input id="auth-email" type="email" placeholder="seu@email.com" autocomplete="email" />
        </label>
        <label>
          <span>Senha</span>
          <input id="auth-pass" type="password" placeholder="••••••••" autocomplete="current-password" />
        </label>
      </div>

      <div class="row gap">
        <button class="btn primary" id="btn-login">Entrar</button>
        <button class="btn" id="btn-register">Criar conta</button>
      </div>

      <div class="divider"></div>
      <details>
        <summary>Primeira vez aqui? (passo a passo)</summary>
        <ol class="small">
          <li>Crie um projeto no Firebase.</li>
          <li>Habilite <b>Authentication (E-mail/Senha)</b> e <b>Firestore</b>.</li>
          <li>Abra <b>js/firebase.js</b> e cole as credenciais do seu projeto.</li>
          <li>Hospede isso no GitHub Pages / Netlify / Vercel (ou Live Server).</li>
        </ol>
      </details>
      <p class="small muted" id="auth-msg"></p>
    </div>
  </main>

  <!-- APP -->
  <main class="app" id="view-app">
    <aside class="sidebar">
      <button class="nav-item active" data-view="dashboard">Dashboard</button>
      <button class="nav-item" data-view="clientes">Clientes & Leads</button>
      <button class="nav-item" data-view="projetos">Projetos</button>
      <button class="nav-item" data-view="financeiro">Financeiro</button>
      <button class="nav-item" data-view="notificacoes">Notificações</button>
    </aside>

    <section class="content">

      <!-- DASHBOARD -->
      <div class="view" id="view-dashboard">
        <div class="row spread">
          <h2>Dashboard</h2>
          <div class="row gap">
            <label class="inline">
              <span class="muted small">Data (dd/mm/aaaa)</span>
              <input
                id="dash-mes"
                type="date"
                autocomplete="off"
              />
            </label>
            <button class="btn" id="btn-dash-refresh">Atualizar</button>
          </div>
        </div>

        <div class="kpi-grid">
          <div class="kpi">
            <div class="kpi-label">Faturamento (mês)</div>
            <div class="kpi-value" id="kpi-fat">R$ 0,00</div>
            <div class="kpi-sub" id="kpi-fat-comp">—</div>
          </div>

          <div class="kpi">
            <div class="kpi-label">Despesas (mês)</div>
            <div class="kpi-value" id="kpi-desp">R$ 0,00</div>
            <div class="kpi-sub" id="kpi-desp-comp">—</div>
          </div>

          <div class="kpi">
            <div class="kpi-label">Resultado (mês)</div>
            <div class="kpi-value" id="kpi-res">R$ 0,00</div>
            <div class="kpi-sub" id="kpi-margem">Margem: 0%</div>
          </div>

          <div class="kpi">
            <div class="kpi-label">A receber</div>
            <div class="kpi-value" id="kpi-areceber">R$ 0,00</div>
            <div class="kpi-sub">Receitas previstas</div>
          </div>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="row spread">
              <h3>Próximos Projetos</h3>
              <span class="muted small">próximos 30 dias</span>
            </div>
            <div class="table-wrap">
              <table class="table">
                <thead>
                  <tr>
                    <th>Data</th><th>Título</th><th>Status</th><th>Cliente</th>
                  </tr>
                </thead>
                <tbody id="dash-projetos-tbody"></tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <div class="row spread">
              <h3>Notificações em destaque</h3>
              <span class="muted small">vencidas / hoje</span>
            </div>
            <div id="dash-notifs"></div>
          </div>
        </div>
      </div>

      <!-- CLIENTES -->
      <div class="view hidden" id="view-clientes">
        <div class="row spread">
          <h2>Clientes & Leads</h2>
          <button class="btn primary" id="btn-open-cliente">Novo cliente/lead</button>
        </div>

        <div class="row gap">
          <label class="inline">
            <span class="muted small">Filtro</span>
            <select id="clientes-filtro">
              <option value="todos">Todos</option>
              <option value="lead">Leads</option>
              <option value="cliente">Clientes</option>
              <option value="novo">Novo</option>
              <option value="orcamento_enviado">Orçamento enviado</option>
              <option value="negociacao">Negociação</option>
              <option value="fechado">Fechado</option>
              <option value="perdido">Perdido</option>
            </select>
          </label>
          <input id="clientes-busca" type="text" placeholder="Buscar por nome..." />
          <button class="btn" id="btn-clientes-refresh">Atualizar</button>
        </div>

        <div class="card">
          <div class="table-wrap">
            <table class="table">
              <thead>
                <tr>
                  <th>Nome</th><th>Tipo</th><th>Status</th><th>Próxima ação</th><th>Ações</th>
                </tr>
              </thead>
              <tbody id="clientes-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- PROJETOS -->
      <div class="view hidden" id="view-projetos">
        <div class="row spread">
          <h2>Projetos</h2>
          <button class="btn primary" id="btn-projeto-open">Novo projeto</button>
        </div>

        <div class="row gap">
          <label class="inline">
            <span class="muted small">Mês (dd/mm/aa dentro)</span>
            <input
              id="projetos-mes"
              type="text"
              inputmode="numeric"
              maxlength="10"
              autocomplete="off"
              placeholder="01/01/26"
            />
          </label>
          <button class="btn" id="btn-projetos-refresh">Atualizar</button>
        </div>

        <div class="card">
          <div class="table-wrap">
            <table class="table">
              <thead>
                <tr>
                  <th>Data</th><th>Título</th><th>Tipo</th><th>Status</th><th>Cliente</th><th>Valor</th><th>Ações</th>
                </tr>
              </thead>
              <tbody id="projetos-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- FINANCEIRO -->
      <div class="view hidden" id="view-financeiro">
        <div class="row spread">
          <h2>Financeiro</h2>
          <button class="btn primary" id="btn-lan-open">Novo lançamento</button>
        </div>

        <div class="row gap">
          <label class="inline">
            <span class="muted small">Mês (MM/AAAA)</span>
            <input id="fin-mes" type="text" maxlength="7" placeholder="01/2026" />
          </label>
          <button class="btn" id="btn-fin-refresh">Atualizar</button>
        </div>

        <div class="card">
          <div class="table-wrap">
            <table class="table">
              <thead>
                <tr>
                  <th>Data</th><th>Tipo</th><th>Categoria</th><th>Cliente</th><th>Projeto</th><th>Valor</th><th>Status</th><th>Ações</th>
                </tr>
              </thead>
              <tbody id="fin-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- NOTIFICAÇÕES -->
      <div class="view hidden" id="view-notificacoes">
        <div class="row spread">
          <h2>Notificações</h2>
          <button class="btn primary" id="btn-open-notif">Nova notificação</button>
        </div>

        <div class="row gap">
          <label class="inline">
            <span class="muted small">Filtro</span>
            <select id="notif-filtro">
              <option value="todas">Todas</option>
              <option value="abertas">Abertas</option>
              <option value="concluidas">Concluídas</option>
            </select>
          </label>
          <button class="btn" id="btn-notif-refresh">Atualizar</button>
        </div>

        <div id="notif-list"></div>
      </div>

    </section>
  </main>

  <!-- MODAL CLIENTE -->
  <div class="modal hidden" id="modal-cliente">
    <div class="modal-content">
      <div class="row spread">
        <h3 id="cliente-modal-title">Novo cliente</h3>
        <button class="btn ghost" id="btn-close-cliente">Fechar</button>
      </div>

      <div class="form-grid-2">
        <label>
          <span>Nome</span>
          <input id="cliente-nome" type="text" placeholder="Ex: Ana Silva" />
        </label>
        <label>
          <span>Tipo</span>
          <select id="cliente-tipo">
            <option value="lead">Lead</option>
            <option value="cliente">Cliente</option>
          </select>
        </label>

        <label>
          <span>Status</span>
          <select id="cliente-status">
            <option value="novo">Novo</option>
            <option value="orcamento_enviado">Orçamento enviado</option>
            <option value="negociacao">Negociação</option>
            <option value="fechado">Fechado</option>
            <option value="perdido">Perdido</option>
          </select>
        </label>

        <label>
          <span>Próxima ação (dd/mm/aaaa)</span>
          <input id="cliente-proxacao" type="text" placeholder="31/01/2026" />
        </label>

        <label class="colspan-2">
          <span>Observações</span>
          <textarea id="cliente-notas" rows="3" placeholder="Detalhes do contato..."></textarea>
        </label>
      </div>

      <div class="row gap">
        <button class="btn primary" id="btn-save-cliente">Salvar</button>
        <button class="btn danger hidden" id="btn-del-cliente">Excluir</button>
      </div>
      <p class="small muted" id="cliente-msg"></p>
    </div>
  </div>

  <!-- MODAL PROJETO -->
  <div class="modal hidden" id="modal-projeto">
    <div class="modal-content wide">
      <div class="row spread">
        <h3 id="projeto-modal-title">Novo projeto</h3>
        <button class="btn ghost" id="btn-projeto-close">Fechar</button>
      </div>

      <div class="form-grid-2">
        <label>
          <span>Cliente</span>
          <select id="projeto-cliente"></select>
        </label>
        <label>
          <span>Data do evento (dd/mm/aaaa)</span>
          <input id="projeto-data" type="text" placeholder="31/01/2026" />
        </label>

        <label class="colspan-2">
          <span>Título</span>
          <input id="projeto-titulo" type="text" placeholder="Ex: Casamento - Ana" />
        </label>

        <label>
          <span>Tipo</span>
          <select id="projeto-tipo">
            <option value="casamento">Casamento</option>
            <option value="aniversario">Aniversário</option>
            <option value="ensaio">Ensaio</option>
            <option value="corporativo">Corporativo</option>
            <option value="outro">Outro</option>
          </select>
        </label>

        <label>
          <span>Status</span>
          <select id="projeto-status">
            <option value="agendado">Agendado</option>
            <option value="em_producao">Em produção</option>
            <option value="entregue">Entregue</option>
            <option value="cancelado">Cancelado</option>
          </select>
        </label>

        <label>
          <span>Valor (R$)</span>
          <input id="projeto-valor" type="text" placeholder="1.500,00" />
        </label>

        <label>
          <span>Forma de pagamento</span>
          <select id="projeto-pagto">
            <option value="pix">Pix</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="cartao">Cartão</option>
            <option value="boleto">Boleto</option>
            <option value="outro">Outro</option>
          </select>
        </label>

        <label class="colspan-2">
          <span>Observações</span>
          <textarea id="projeto-notas" rows="3" placeholder="Detalhes do projeto..."></textarea>
        </label>
      </div>

      <div class="row gap">
        <button class="btn primary" id="btn-projeto-save">Salvar</button>
        <button class="btn danger hidden" id="btn-projeto-del">Excluir</button>
      </div>
      <p class="small muted" id="projeto-msg"></p>
    </div>
  </div>

  <!-- MODAL LANÇAMENTO -->
  <div class="modal hidden" id="modal-lan">
    <div class="modal-content wide">
      <div class="row spread">
        <h3 id="lan-modal-title">Novo lançamento</h3>
        <button class="btn ghost" id="btn-lan-close">Fechar</button>
      </div>

      <div class="form-grid-2">
        <label>
          <span>Tipo</span>
          <select id="lan-tipo">
            <option value="receita">Receita</option>
            <option value="despesa">Despesa</option>
          </select>
        </label>

        <label>
          <span>Data (dd/mm/aaaa)</span>
          <input id="lan-data" type="text" placeholder="31/01/2026" />
        </label>

        <label>
          <span>Categoria</span>
          <input id="lan-categoria" type="text" placeholder="Ex: Adiantamento / Combustível / etc" />
        </label>

        <label>
          <span>Status</span>
          <select id="lan-status">
            <option value="pago">Pago</option>
            <option value="aberto">Em aberto</option>
          </select>
        </label>

        <label>
          <span>Cliente (opcional)</span>
          <select id="lan-cliente"></select>
        </label>

        <label>
          <span>Projeto (opcional)</span>
          <select id="lan-projeto"></select>
        </label>

        <label class="colspan-2">
          <span>Descrição</span>
          <input id="lan-desc" type="text" placeholder="Ex: Entrada de sinal / Compra de equipamento..." />
        </label>

        <label>
          <span>Valor (R$)</span>
          <input id="lan-valor" type="text" placeholder="1.500,00" />
        </label>
      </div>

      <div class="row gap">
        <button class="btn primary" id="btn-lan-save">Salvar</button>
        <button class="btn danger hidden" id="btn-lan-del">Excluir</button>
      </div>
      <p class="small muted" id="lan-msg"></p>
    </div>
  </div>

  <!-- MODAL NOTIFICAÇÃO -->
  <div class="modal hidden" id="modal-notif">
    <div class="modal-content">
      <div class="row spread">
        <h3 id="notif-modal-title">Nova notificação</h3>
        <button class="btn ghost" id="btn-close-notif">Fechar</button>
      </div>

      <div class="form-grid-2">
        <label class="colspan-2">
          <span>Título</span>
          <input id="notif-titulo" type="text" placeholder="Ex: Cobrar cliente X" />
        </label>

        <label>
          <span>Data (dd/mm/aaaa)</span>
          <input id="notif-data" type="text" placeholder="31/01/2026" />
        </label>

        <label>
          <span>Prioridade</span>
          <select id="notif-prioridade">
            <option value="baixa">Baixa</option>
            <option value="media" selected>Média</option>
            <option value="alta">Alta</option>
          </select>
        </label>

        <label class="colspan-2">
          <span>Descrição</span>
          <textarea id="notif-desc" rows="3" placeholder="Detalhes do lembrete..."></textarea>
        </label>
      </div>

      <div class="row gap">
        <button class="btn primary" id="btn-save-notif">Salvar</button>
        <button class="btn danger hidden" id="btn-del-notif">Excluir</button>
      </div>
      <p class="small muted" id="notif-msg"></p>
    </div>
  </div>

  <!-- JS -->
  <script src="js/firebase.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/state.js"></script>

  <script src="js/auth.js"></script>
  <script src="js/tenant.js"></script>

  <script src="js/dashboard.js"></script>
  <script src="js/clientes.js"></script>
  <script src="js/projetos.js"></script>
  <script src="js/financeiro.js"></script>
  <script src="js/notificacoes.js"></script>

  <script src="js/app.js"></script>
</body>
</html>
